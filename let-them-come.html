<!DOCTYPE html>
<html lang="en">

<head>
	<!-- Required meta tags -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<title>Let Them Come Project</title>
	<meta name="description" content="C++ Let Them Come game clone">

	<!-- Bootstrap CSS -->
	<link href="./css/bootstrap.min.css" rel="stylesheet">
	<!-- Font Awesome -->
	<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
	<!-- Prism JS -->
	<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/styles/atom-one-dark.min.css">
	<!-- Google Font -->
	<link href="https://fonts.googleapis.com/css?family=Raleway:300,400,500,700,900" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700,900" rel="stylesheet">
	<!-- owl carousel css-->
	<link rel="stylesheet" href="./css/owl.carousel.min.css">
	<link rel="stylesheet" href="./css/owl.theme.default.min.css">
	<!-- magnific-popup CSS -->
	<link rel="stylesheet" href="./css/magnific-popup.css">
	<!-- YouTubePopUp CSS -->
	<link rel="stylesheet" href="./css/bicon.min.css" />
	<link rel="stylesheet" href="./css/YouTubePopUp.css">
	<!-- Animate CSS -->
	<link rel="stylesheet" href="./css/animate.css">
	<!-- custom styles (optional) -->
	<link href="./css/style.css" rel="stylesheet">
	<link href="./css/responsive.css" rel="stylesheet">
</head>

<body>
	<!--Loader-->
	<div id="loader">
		<div id="loading-center">
			<div id="loading-center-absolute">
				<div class="object"></div>
				<div class="object"></div>
				<div class="object"></div>
				<div class="object"></div>
				<div class="object"></div>
				<div class="object"></div>
				<div class="object"></div>
				<div class="object"></div>
				<div class="object"></div>
				<div class="object"></div>
			</div>
		</div>
	</div>
	<!-- Loader end -->
	<!-- ====== Navgition ======  -->
	<nav class="navbar navbar-expand-lg fixed-top">
		<div class="container">
			<!-- Logo -->
			<a class="navbar-brand pt-0 logo" href="#">
				<img src="./img/game-programmer-logo.png" alt="Game Programmer Logo" class="logo-1">
				<img src="./img/game-developer-logo.png" alt="Game Developer Logo" class="logo-2">
			</a>
			<!-- // Logo -->

			<!-- Mobile Menu -->
			<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-expanded="false"><span><i class="fa fa-bars"></i></span></button>
			<!-- Mobile Menu -->

			<div class="collapse navbar-collapse main-menu" id="navbarSupportedContent">
				<ul class="navbar-nav ml-auto">
					<li class="nav-item"><a class="nav-link" href="./">Home</a></li>
					<li class="nav-item"><a class="nav-link" href="./#about">About</a></li>
					<li class="nav-item"><a class="nav-link" href="./#resume">Resume</a></li>
					<li class="nav-item"><a class="nav-link" href="./#skills">Skills</a></li>
					<li class="nav-item active"><a class="nav-link" href="./#portfolio">Portfolio</a></li>
					<li class="nav-item"><a class="nav-link" href="./#contact">Contact</a></li>
				</ul>
			</div>
		</div>
	</nav>
	<!-- ====== End Navgition ======  -->
	<!-- HEADER -->
	<div class="port-hero overlay">
		<div class="container">
			<div class="col-md-12">
				<h2>Let Them Come</h2>
				<div class="breadcroumb">
					Retro
				</div>
			</div>
		</div>
	</div>
	<!-- END HEADER -->
	<!-- single portfolio section start -->
	<div class="single-portfolio section-padding">
		<div class="container">
			<div class="row">
				<div class="col-md-6">
					<div class="owl-carousel owl-theme">
						<div class="item-portfolio">
							<img src="./img/portfolio/let-them-come-weapon-1.jpg" alt="Missile Command Weapon 1" />
						</div>
						<div class="item-portfolio">
							<img src="./img/portfolio/let-them-come-weapon-2.jpg" alt="Missile Command Weapon 2" />
						</div>
						<div class="item-portfolio">
							<img src="./img/portfolio/let-them-come-weapon-3.jpg" alt="Missile Command Weapon 3" />
						</div>
					</div>
				</div>
				<div class="col-md-6">
					<div class="project-meta-wrapper">
						<h4 class="sub-tit">Project Overview</h4>
						<ul class="single-project-meta">
							<li>
								<i class="fa fa-cube"></i><span>Project Type:</span> Retro Console Game Clone
							</li>
							<li>
								<i class="fa fa-user"></i><span>Role: </span> Gameplay Programmer
							</li>
							<li>
								<i class="fa fa-desktop"></i><span>Software:</span> Visual Studio 2017
							</li>
							<li>
								<i class="fa fa-code"></i><span>Languages:</span> C++
							</li>
							<li>
								<i class="fa fa-link"></i><span>Download link:</span> <a href="https://www.dropbox.com/s/xre7aidr2lldr8m/LetThemCome.zip?dl=0" target="_blank">Play Game</a>
							</li>
							<li>
								<i class="fa fa-play-circle"></i><span>Programming Reel:</span> <a href="https://www.youtube.com/embed/cdpx9kRCP0E" target="_blank">Watch</a>
							</li>
						</ul>
					</div>
				</div>
				<div class="col-md-12">
					<div class="single-project-description">
						<h4 class="sub-tit">Project Brief</h4>
						<p>
							This is was an exercise utilizing the component base system from <a href="./pong.html">Pong</a>, the hash-map implementation from <a href="./missile-command.html">Missile Command</a> and implementing a <strong>Finite State Machine</strong> to control the behaviour of the weapon you use to destroy the aliens (if you can call aliens the green circles at the bottom).
						</p>
						<br>
						<h4 class="sub-tit">Responsibilities/Achievements</h4>
                        <ul>
							<li>- Understand and implement a Finite State Machine to control the status of the player weapon</li>
							<li>- Use different math formulas to create the behaviour of the 3 different weapon states</li>
							<li>- Utilize different systems in conjunction to create a robust game system to speed up development process and allow rapid prototyping</li>
						</ul>
						<h4 class="sub-tit">Code Samples</h4>
						<div id="accordion">
							<div class="card">
								<div class="card-header" id="headingOne">
									<h5 class="mb-0">
										<button class="btn btn-link" data-toggle="collapse" data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
											Finite State Machine Component
										</button>
									</h5>
								</div>
								<div id="collapseOne" class="collapse" aria-labelledby="headingOne" data-parent="#accordion">
									<div class="card-body">
										<pre><code class="cpp">
/*
* Carlos Adan Cortes De la Fuente
* All rights reserved. Copyright (c)
* Email: dev@carlosadan.com
*/

class COGFSM : public Component
{
private:
	FSMState* mCurrent;
	FSMState* mNext;

public:
	static std::vector&lt;COGFSM*> mFSMComponents;

	COGFSM(GameObject* pGO) : Component(pGO), mCurrent(nullptr), mNext(nullptr) {}
	~COGFSM() 
	{
		// Makes sure the states are cleaned
		delete mNext;
		delete mCurrent;
	}

	// Component funcitons
	virtual ComponentType GetType() const { return ComponentType::FSM; }
	virtual void Initialize() override { AddToComponentVector(mFSMComponents); }
	virtual void Destroy() override { RemoveFromComponentVector(mFSMComponents); } 
	
	// Manages the state changes
	void Initialize(FSMState* pState) 
	{
		assert(mCurrent == nullptr); // Terminate the program if the state machine has an initial state before we stablish one
		mCurrent = pState;
	}

	// Assigns the next state to the FSM
	void Next(FSMState* pState)
	{
		if (mCurrent != nullptr)
		{
			delete mNext;
		}
		mNext = pState;
	}

	// Runs through the game loop for that state machine
	void Update(float fDeltaT)
	{
		// Means we have a new state to transition to
		if (mNext != nullptr)
		{
			mCurrent->OnExit(); // Runs the exit state code
			delete mCurrent;

			mCurrent = mNext;
			mCurrent->OnEnter(); // Runs the on enter code

			mNext = nullptr;
		}

		mCurrent->OnUpdate(fDeltaT);
	}

	// Creates a New State depending on the type
	template&lt;class T>
	T* Create()
	{
		return new T(this);
	}
};

std::vector&lt;COGFSM*> COGFSM::mFSMComponents; // inits the fsm components
										</code></pre>
									</div>
								</div>
							</div>
							<div class="card">
								<div class="card-header" id="headingOne">
									<h5 class="mb-0">
										<button class="btn btn-link" data-toggle="collapse" data-target="#collapseTwo" aria-expanded="true" aria-controls="collapseTwo">
											State Class
										</button>
									</h5>
								</div>
								<div id="collapseTwo" class="collapse" aria-labelledby="headingOne" data-parent="#accordion">
									<div class="card-body">
										<pre><code class="c++">
/*
* Carlos Adan Cortes De la Fuente
* All rights reserved. Copyright (c)
* Email: dev@carlosadan.com
*/

class FSMState
{
protected:
	COGFSM* mFSM;

public:

	FSMState(COGFSM* pFSM) : mFSM(fFSM) {} 
	~FSMState() {}

	virtual void OnEnter() {} // Gets called when the state is entered for the first time
	virtual void OnExit() {} // Gets called when the state is ending
	virtual void OnUpdate(float fDeltaT) {}; // gets called every frame that the state is active
};
										</code></pre>
									</div>
								</div>
							</div>
							<div class="card">
								<div class="card-header" id="headingOne">
									<h5 class="mb-0">
										<button class="btn btn-link" data-toggle="collapse" data-target="#collapseThree" aria-expanded="true" aria-controls="collapseThree">
											Specific State Class (Weapon 2 example)
										</button>
									</h5>
								</div>
								<div id="collapseThree" class="collapse" aria-labelledby="headingOne" data-parent="#accordion">
									<div class="card-body">
										<pre><code class="c++">
/*
* Carlos Adan Cortes De la Fuente
* All rights reserved. Copyright (c)
* Email: dev@carlosadan.com
*/

#define PI 3.14159265f
#define Deg2Rad PI / 180.0f 
#define Rad2Deg 180.0f / PI

class FSMStateFire : public FSMState
{
public:
	FSMStateFire(COGFSM* pFSM) {}
	~FSMStateFire() {}

	virtual void OnUpdate(float fDeltaT) override 
	{
		// Shoot
		if (InputManager::GetInstance()->mMouseLeft && InputManager::GetInstance()->mMouseLeft != InputManager::GetInstance()->mMouseLeftPreviousState)
		{
			for (IShootEvent* pIShootEventListener : World::mShootEventListeners)
			{
				exColor color;
				color.mColor[0] = 252;
				color.mColor[1] = 115;
				color.mColor[2] = 17;
				color.mColor[3] = 255;

				// We get the main angle and add and substract degrees
				exVector2 mousePos = InputManager::GetInstance()->mMousePosition;
				exVector2 origin = mFSM->GetGameObject()->FindComponent&lt;COGLineShape>(ComponentType::LineShape)->GetOrigin();
				exVector2 dir = Vector2::GetDirectionVector(origin, mousePos);
				exVector2 normalizedDir = Vector2::Normalized(dir);
				
				// We get the angle for the other two vector
				float angle = std::atan2(dir.y, dir.x);
				float spread = 25.0f;
				exVector2 bulletDown = { std::cos(angle + spread * Deg2Rad), std::sin(angle + spread * Deg2Rad) };
				exVector2 bulletUp = { std::cos(angle - spread * Deg2Rad), std::sin(angle - spread * Deg2Rad) };

				// Spawns 3 bullets
				pIShootEventListener->OnBulletSpawn(normalizedDir, color);	// Center Bullet
				pIShootEventListener->OnBulletSpawn(bulletUp, color);		// Bullet going up
				pIShootEventListener->OnBulletSpawn(bulletDown, color);		// Bullet going down
			}
		}

		// Cache Input
		InputManager::GetInstance()->CacheInput();
	}
};
										</code></pre>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="single-project-link">
						<a href="./#portfolio" class="project-link prev-project"><i class="fa fa-angle-left"> back to projects</i></a>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- single portfolio section end -->
	<footer>
		<div class="container">
			<div class="row">
				<h3>Contact Details</h3>
				<ul class="footer-info">
					<li><i class="fa fa-phone"></i>+52 1 722-4043176</li>
					<li><i class="fa fa-envelope"></i>dev@carlosadan.com<li>
				</ul>
				<div class="social-icon">
					<a href="https://www.linkedin.com/in/carlos-adan-cortes-de-la-fuente-20777356/" target="_blank"><span><i class="fa fa-linkedin" aria-hidden="true"></i></span></a>
					<a href="https://github.com/krlozadan" target="_blank"><span><i class="fa fa-github" aria-hidden="true"></i></span></a>
					<a href="https://twitter.com/krlozadan" target="_blank"><span><i class="fa fa-twitter" aria-hidden="true"></i></span></a>
				</div>
				<img src="./img/game-developer-logo.png" alt="Game Developer Logo">
			</div>
			<!-- ./ Row -->
		</div>
		<!-- ./ Container -->
		<div class="rights">
			<p>©2018 Carlos Adan. All Rights Reserved.</p>
		</div>
	</footer>
	<!-- ======./ Footer ======  -->
	<!-- Optional JavaScript -->
	<script src="./js/jquery-3.1.1.min.js"></script>
	<script src="./js/Migrate.js"></script>
	<script src="./js/bootstrap.min.js"></script>
	<!-- scrollIt js -->
	<script src="./js/scrollIt.min.js"></script>
	<!-- owl carousel js -->
	<script src="./js/owl.carousel.min.js"></script>
	<!-- jquery.counterup.min js -->
	<script src="./js/jquery.counterup.min.js"></script>
	<!-- typed -->
	<script src="./js/typed.js"></script>
	<!-- magnific-popup -->
	<script src="./js/jquery.magnific-popup.min.js"></script>
	<!-- isotope.pkgd.min js -->
	<script src="./js/isotope.pkgd.min.js"></script>
	<!-- jquery.waypoints.min js -->
	<script src="./js/jquery.waypoints.min.js"></script>
	<script src="./js/wow.js"></script>
	<!-- jquery barfiller js -->
	<script src="./js/jquery.barfiller.js"></script>
	<!-- jquery matchHeight -->
	<script src="./js/jquery.matchHeight-min.js"></script>
	<script src="./js/background-effect.js"></script>
	<!-- validator js -->
	<script src="./js/validator.js"></script>
	<!-- ====== gmap3 js ======= -->
	<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDJ_mGhah8EApmFiXYYBsdBuygviP2M2EE"></script>
	<script src="./js/gmap3.min.js"></script>
	<!-- ====== Highlight JS ======= -->
	<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js"></script>
	<!-- custom JavaScript -->
	<script src="./js/custom.js"></script>
	<script>hljs.initHighlightingOnLoad();</script>
</body>

</html>